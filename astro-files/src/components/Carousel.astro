<section class="carousel">
  <div
    class="swiper carousel-default"
    data-bind="carousel"
    data-aos="fade-in"
    data-aos-delay="100"
  >
    <slot />

    <div class="swiper-pagination"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</section>

<style lang="scss" is:global>
  .carousel {
    margin-top: 1rem;
  }

  .carousel-default {
    --controls-width: 35px;

    .carousel-title {
      font-weight: 500;
      color: white;
      margin-bottom: 0.5rem;

      &:not(:first-child) {
        margin-top: 1rem;
      }
    }

    .carousel-text {
      font-size: 0.875rem;
    }

    overflow-y: visible !important;
    overflow-x: clip !important;

    .swiper-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .swiper-slide {
      img {
        height: auto;
      }
    }

    .swiper-button-prev,
    .swiper-button-next {
      display: grid;
      place-content: center;
      width: var(--controls-width);
      height: var(--controls-width);
      border-radius: 50%;
      border: 1px solid var(--primary-color-hover);
      align-self: center;
      cursor: pointer;
      position: absolute;
      top: calc(var(--controls-width) * -1);

      &:hover {
        background-color: var(--primary-color-hover);
      }
    }

    .swiper-button-prev {
      right: calc(var(--controls-width) + 8px);

      &::before {
        content: url(/src/assets/img/chevron.svg);
        transform: rotate(180deg);
        margin-top: -4px;
        margin-left: -2px;
      }
    }

    .swiper-button-next {
      right: 0rem;

      &::before {
        content: url(/src/assets/img/chevron.svg);
        margin-top: 4px;
        margin-left: 2px;
      }
    }

    .swiper-button-disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .swiper-pagination {
      bottom: -20px !important;
    }

    .swiper-pagination-bullet {
      background-color: var(--secondary-color);
    }

    .swiper-pagination-bullet-active {
      background-color: white;
    }
  }
</style>

<script>
  import Swiper from "swiper";
  import { Navigation } from "swiper/modules";
  import { EffectCoverflow } from "swiper/modules";
  import { Pagination } from "swiper/modules";
  import { Keyboard } from "swiper/modules";
  import "swiper/css";
  import "swiper/css/pagination";

  new Swiper('[data-bind="carousel"]', {
    // loop: true,
    // centeredSlides: true,
    // spaceBetween: 8,
    initialSlide: 0,
    slidesPerView: "auto",
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    keyboard: {
      enabled: true,
    },
    hashNavigation: {
      watchState: true,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    modules: [Navigation, EffectCoverflow, Pagination, Keyboard],
  });
</script>
